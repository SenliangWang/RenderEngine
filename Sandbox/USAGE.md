# 快速使用指南

## 启动程序

```bash
cd /workspace/Sandbox
../build/bin/Sandbox
```

## 界面说明

程序启动后，你将看到：
1. **3D 视窗**：显示被剖切的立方体
2. **ImGui 控制面板**：右侧的"三维剖面控制"面板

## 剖切平面原理

```
       法线方向 (Normal)
            ↑
            |
    --------|--------  剖切平面 (Clip Plane)
    ########|         这一侧被保留
    ########|
    ########|
            |         这一侧被丢弃
            |
```

剖切平面方程：`Ax + By + Cz + D = 0`

## 基本操作

### 1. 启用剖切
- 勾选 `启用剖切` 复选框
- 立方体将被剖切平面切割

### 2. 调整剖切方向
使用 X/Y/Z 滑块调整法线：
- `X = 1, Y = 0, Z = 0`：垂直于 X 轴的平面（YZ 平面）
- `X = 0, Y = 1, Z = 0`：垂直于 Y 轴的平面（XZ 平面）
- `X = 0, Y = 0, Z = 1`：垂直于 Z 轴的平面（XY 平面）

### 3. 调整剖切位置
使用 `剖切距离` 滑块：
- 值为 0：剖切平面通过原点
- 正值：平面沿法线方向移动
- 负值：平面沿法线反方向移动

### 4. 快捷预设
点击以下按钮快速切换：
- `XY平面`：从上往下看的剖面
- `XZ平面`：从前往后看的剖面
- `YZ平面`：从左往右看的剖面

### 5. 可视化选项
- `显示剖切平面`：显示半透明的剖切平面
- `高亮剖切面`：高亮显示截面边界
- `立方体颜色`：调整模型颜色
- `剖切面颜色`：调整高亮颜色

## 相机控制

- **鼠标右键拖动**：旋转视角
- **Q 键**：拉近镜头
- **E 键**：拉远镜头

## 实验示例

### 示例 1：水平剖切
1. 点击 `XY平面` 按钮
2. 调整 `剖切距离` 从 -1 到 1
3. 观察立方体从下到上被逐渐剖切

### 示例 2：斜向剖切
1. 设置 X = 0.7, Y = 0.7, Z = 0
2. 调整 `剖切距离` 观察斜向剖切效果

### 示例 3：角度剖切
1. 设置 X = 0.577, Y = 0.577, Z = 0.577
2. 这将沿立方体对角线方向剖切

## 调试技巧

如果剖切效果不明显：
1. 确保 `启用剖切` 已勾选
2. 尝试调整 `剖切距离` 滑块
3. 勾选 `显示剖切平面` 查看平面位置
4. 调整相机角度以获得更好的视角

## 性能说明

- 当前实现可以流畅运行在 60+ FPS
- 如果遇到性能问题，可以：
  - 关闭 `高亮剖切面` 选项
  - 降低模型复杂度

## 常见问题

**Q: 为什么看不到剖切效果？**
A: 检查剖切距离是否设置在立方体范围内（-1 到 1）

**Q: 剖切面显示不正确？**
A: 确保法线向量的长度不为零（至少有一个分量非零）

**Q: 如何重置到默认状态？**
A: 点击任意快捷预设按钮，然后设置剖切距离为 0

## 技术实现

该实现使用了 **Fragment Shader Discard** 方法：
- 在片段着色器中计算每个像素到剖切平面的距离
- 如果距离为负（在平面的背面），则丢弃该像素
- 这种方法灵活且高效

## 源码位置

- 着色器：`/workspace/Sandbox/assets/shaders/CrossSection.glsl`
- 主要实现：`/workspace/Sandbox/SandBox.cpp` 中的 `CrossSectionLayer` 类

---

祝你使用愉快！如有问题，请查看详细文档 `三维剖面功能说明.md`
